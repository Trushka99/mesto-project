(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),n=document.querySelector(".popup_function_edit"),o=document.querySelector(".popup_function_add"),r=document.querySelector(".popup__form_redact"),u=document.querySelector(".popup__form_add"),c=(document.querySelector("#popup_name"),document.querySelector("#popup_job"),document.querySelector(".profile__name"),document.querySelector(".profile__subname"),o.querySelector(".popup__input_name")),i=o.querySelector(".popup__input_picture"),a=document.querySelector(".popup_function_zoom"),p=document.querySelector(".popup__image"),l=document.querySelector(".popup__image-name"),s=document.querySelector(".elements"),d=document.querySelector("#place-template").content,_=document.querySelectorAll(".popup"),m=document.querySelectorAll(".popup__close");function f(e){e.classList.add("popup_opened"),document.body.addEventListener("keyup",y)}function v(e){e.classList.remove("popup_opened"),document.body.removeEventListener("keyup",y)}function y(e){var t=e.keyCode;_.forEach((function(e){27==t&&v(e)}))}var S=document.querySelector("#popup_name"),q=document.querySelector("#popup_job"),L=document.querySelector(".profile__name"),g=document.querySelector(".profile__subname"),k=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove("popup__submit_inactive"),t.disabled=!1):(t.classList.add("popup__submit_inactive"),t.disabled=!0)},E=function(){var e=Array.from(document.querySelectorAll(".popup__form"));e.forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),e.forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__submit");k(t,n),t.forEach((function(o){o.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__input_error"),n.textContent=""}(e,t):function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__input_type_error"),o.textContent=n,o.classList.add("popup__input_error")}(e,t,t.validationMessage)}(e,o),k(t,n)}))}))}(e)}))}))};function b(e){var t=d.querySelector(".elements__element").cloneNode(!0),n=t.querySelector(".elements__image");n.src=e.link,n.alt=e.name,t.querySelector(".elements__description").textContent=e.name;var o=t.querySelector(".elements__heart");return o.addEventListener("click",(function(){o.classList.toggle("elements__heart_status_active")})),t.querySelector(".elements__delete").addEventListener("click",(function(){t.remove()})),n.addEventListener("click",(function(){f(a),p.src=e.link,p.alt=e.name,l.textContent=e.name})),t}e.addEventListener("click",(function(){f(n),S.value=L.textContent,q.value=g.textContent})),t.addEventListener("click",(function(){f(o)})),m.forEach((function(e){e.addEventListener("click",(function(){return n=(t=e).closest(".popup"),void t.addEventListener("click",(function(){return v(n)}));var t,n}))})),_.forEach((function(e){e.addEventListener("click",(function(){return t=event,n=e,void(t.target===n?v(n):t.stopPropagation());var t,n}))})),r.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=S.value,g.textContent=q.value,v(n)})),[{name:"Дио Брандо",link:"../src/images/zJrhrGS__400x400.jpg"},{name:"Джозеф",link:"../src/images/joseph.jpg"},{name:"Карс",link:"../src/images/Kars_Infobox_Manga.jpg"},{name:"Лиза Лиза",link:"../src/images/16521838341462763.jpg"},{name:"Джоске",link:"../src/images/josuke.png"},{name:"Джотаро",link:"../src/images/jotaro.jpg"}].forEach((function(e){var t=b(e);s.append(t)})),u.addEventListener("submit",(function(e){e.preventDefault();var t={};t.name=c.value,t.link=i.value;var n=b(t);s.prepend(n),v(o),u.reset(),E()})),E()})();